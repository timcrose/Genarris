[Genarris_master]
#procedures = ["Structure_Generation_Batch", "Harris_Approximation_Batch", "RCD_Calculation", "RCD_Difference_Folder_Inner", "Affinity_Propagation_Fixed_Clusters", "Affinity_Propagation_Fixed_Clusters"]
#procedures = ["Affinity_Propagation_Fixed_Clusters", "Affinity_Propagation_Fixed_Clusters"]
#procedures = ["Structure_Generation_Batch", 'Run_FHI_Aims_Batch']
#procedures = ["Run_FHI_Aims_Batch"]
#procedures = ["Harris_Single_Molecule_Prep"]
#procedures = ["Harris_Approximation_Batch"]
#procedures = ["Estimate_Unit_Cell_Volume", "Harris_Approximation_Batch"]
#procedures = ["Harris_Single_Molecule_Prep", "Harris_Approximation_Batch"]
#procedures = ["Relax_Single_Molecule"]
#procedures = ["Pygenarris_Structure_Generation"]
#procedures = ["Estimate_Unit_Cell_Volume"]
procedures = ["Relax_Single_Molecule", "Estimate_Unit_Cell_Volume", "Pygenarris_Structure_Generation", "Harris_Single_Molecule_Prep", "Harris_Approximation_Batch", "RCD_Calculation", "RCD_Difference_Folder_Inner", "Affinity_Propagation_Fixed_Clusters", "Affinity_Propagation_Fixed_Clusters", "Run_FHI_Aims_Batch"]
#procedures = ["Affinity_Propagation_Fixed_Clusters", "Affinity_Propagation_Fixed_Clusters", "Run_FHI_Aims_Batch"]

[relax_single_molecule]
# Number of cores (MPI ranks) to run this section with
num_cores = 57
# path to aims control input file
control_path = control_relax_single_molecule.in
# output directory path of parent directory where working directories for aims will be placed
aims_output_dir = aims_relaxation_single

#Default
#num_cores = comm.size

#Inferred
molecule_path = /home/trose/rithwik_generation_code/test/geometry.in
aims_lib_dir = /home/trose/aims_python_lib/make_sys_intelpython3_full

[estimate_unit_cell_volume]
# Number of cores (MPI ranks) to run this section with
num_cores = 57
Z = 2
verbose = TRUE

#Default
#num_replicas = 1
#num_cores = comm.size

#Inferred
#molecule_path =

[pygenarris_structure_generation]
# Number of cores (MPI ranks) to run this section with
num_cores = 57
num_structures = 500
num_structures_per_allowed_SG_per_rank = 20
Z = 2
sr = 0.6
tol = 0.0001
max_attempts = 1000000000
geometry_out_filename = target1_2mpc.out
output_format = both
output_dir = target1_2mpc_raw_jsons

#Default
#num_replicas = 1
#num_cores = comm.size
#volume_mean -> replaced by estimate_unit_cell_volume
#volume_std -> replaced by estimate_unit_cell_volume

#Inferred
#molecule_path = 


[structure_generation_batch]
number_of_structures = 100
number_of_attempts = 1000000
# Number of cores (MPI ranks) to run this section with
num_cores = 57

#default: inherits from Genarris_master
tmp_dir = tmp

#comment out this next line to keep generated tmp dir
#tmp_dir_clean_up = TRUE
NMPC = 2

#defaults to racemic, remove # to force to chiral
# is_chiral = TRUE

#default: molecule_original
molecule_name = target1_2mpc_original

#default: molecule_enantiomer
enantiomer_name = target1_2mpc_enantiomer

#default : None
space_groups_allowed = [14, 17, 29, 33]

# default: [0]
wyckoff_list = [0]

# default: 0.25
p_tolerance = 0.2

# default: [30, 150]
angle_range = [20, 160]

# default: [0.5, 2]
ax_variance = [0.5, 2.0]
by_variance = [0.5, 2.0]
cz_variance = [0.5, 2.0]

# default: None, which disables the test
com_dist = 4.3
atom_dist = 0.85
specific_radius_proportion = 0.5

# default: None, which disables fuzzy sr
specific_radius_std = 0.01

# default: None
specific_radius_lower_bound = 0.4

# default: {}; radius are defined in util.radius
#custom_radii = {"N" : 2.05}

# default: {}
#custom_radii_by_pairs = {("C","S") : 3.7}

# default: 1024
attempt_limit = 1000000
attempts_per_space_group_change = 8
attempts_per_unit_cell_change = 4
attempts_per_wyckoff_list_change = 2
attempts_per_closeness_criteria_change = 1
fill_molecule_attempt_limit = 1
output_dir = structures_generated

# default: json
output_format = both

# default: ["struct_index","_","random_index"]
struct_id_scheme = ["target1_2mpc_", "random_index"]
struct_index_length = 3

#Default
#num_cores = comm.size
#ucv_target -> replaced by estimate_unit_cell_volume
#ucv_ratio_range default: [1,1] but replaced by estimate_unit_cell_volume
#ucv_std default: None but replaced by estimate_unit_cell_volume

#Inferred
##molecule_path =

[harris_single_molecule_prep]
# Number of cores (MPI ranks) to run this section with
num_cores = 57
molecule_format = geometry
# path to aims control input file
control_path = control_single_molecule_ha.in
# output directory path of parent directory where working directories for aims will be placed
aims_output_dir = harris_single_molecule_prep_aims_dir
energy_name = harris_energy

#Default
##num_replicas = 1
#num_cores = comm.size
##energy_name = energy

##Inferred
##molecule_path = 

[harris_approximation_batch]
# Number of cores (MPI ranks) to run this section with
num_cores = 57
output_dir = target1_2mpc_he
energy_name = harris_energy
# output directory path of parent directory where working directories for aims will be placed
aims_output_dir = aims_target1_2mpc_he
# path to aims control input file
control_path = control_ha.in
match_molecule_tolerance = 1
verbose = TRUE
num_replicas = 1

#Default
#num_cores = comm.size

##Inferred
###structure_dir = 
###molecule_path = 
###aims_lib_dir =


[rcd_calculation]
# Number of cores (MPI ranks) to run this section with
num_cores = 57
axes = [(0,3),(2,8)]
close_picks = 16
property_name = rcd
NAPM = 13
output_info_file = rcd_vectors.info
output_dir = target1_2mpc_0_he_rcd
structure_suffix = .json
structure_format = json
output_format = json

#Default
#num_cores = comm.size

#Inferred
#structure_dir = 


[rcd_difference_folder_inner]
#default 1
contribution_ratio = 1
select_pairs = 8
#disable_enantiomer = TRUE
#diff_list_output = ./rcd_difference_list_step_1.info

# optional output option
diff_matrix_output = rcd_difference_matrix_step_0.info
# Number of cores (MPI ranks) to run this section with
num_cores = 57
structure_suffix = .json
structure_format = json

#Default
#num_cores = comm.size

# Inferred:
#structure_dir =
#property_name = 


[affinity_propagation_fixed_clusters]
num_of_clusters = 10
preference_range = [-1000, 1000]
num_of_clusters_tolerance = 0
max_sampled_preferences = 500000
# output_without_success = TRUE ; uncomment to allow clustered pool output even if target num_of_clusters is not hit within tolerance

# Parameters for AP calculation
affinity_type = ["exponential",1]
damping = 0.5
convergence_iter = 15
max_iter = 200

#default: None, which allows AP to auto-set preference (or use preference_range if specified)
preference = None
property_key = AP_cluster
output_file = ./sample_ap_result.info
exemplars_output_dir = ./sample_structures_exemplars
#json, geometry, both
exemplars_output_format = json
output_format = json
output_dir = ./sample_structures_clustered
structure_suffix = .json
verbose_output = TRUE

#Round 2
output_file_2 = sample_ap_result_2.info
exemplars_output_dir_2 = sample_structures_exemplars_2
num_of_clusters_2 = 2
output_dir_2 = sample_structures_clustered_2

# Number of cores (MPI ranks) to run this section with
num_cores = 57

#Default
#num_cores = comm.size

# Inferred:
#dist_mat_input_file =  
#structure_dir = 


[run_fhi_aims_batch]
# Number of cores (MPI ranks) to run this section with
num_cores=57
num_replicas=1
# output directory path of parent directory where working directories for aims will be placed
aims_output_dir = aims_target1_2mpc_relaxed
output_dir = target1_2mpc_relaxed
# path to aims control input file
control_path = control_relax_structs.in
energy_name = energy

#Default
#num_cores = comm.size

#Inferred
##structure_dir =
##aims_lib_dir =
